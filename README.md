# æœˆé¥¼ TV (MooncakeTV)

ä¸€ä¸ªåŸºäº Wails æ„å»ºçš„è·¨å¹³å°æ¡Œé¢åª’ä½“åº”ç”¨ã€‚

## ç‰¹æ€§

- ğŸ¬ **åª’ä½“æµè§ˆä¸ç®¡ç†** - æµè§ˆã€æœç´¢å’Œç®¡ç†åª’ä½“å†…å®¹
- â­ **å¤šæºè¯„åˆ†** - æ•´åˆè±†ç“£ã€IMDBã€TMDB ç­‰å¤šä¸ªè¯„åˆ†å¹³å°
- ğŸ”– **ä¹¦ç­¾æ”¶è—** - æ”¶è—å–œçˆ±çš„å½±è§†å†…å®¹
- ğŸ“Š **è§‚çœ‹å†å²** - è‡ªåŠ¨è®°å½•è§‚çœ‹å†å²
- ğŸ’¬ **è¯„è®ºåŠŸèƒ½** - ä¸ºåª’ä½“å†…å®¹æ·»åŠ ä¸ªäººè¯„è®º
- ğŸ¥ **è§†é¢‘æ’­æ”¾** - å†…ç½® HLS å’Œ Video.js æ”¯æŒ
- ğŸŒ **ä»£ç†æ”¯æŒ** - æ”¯æŒç½‘ç»œä»£ç†é…ç½®

## æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: Wails v2
- **è¯­è¨€**: Go
- **æ•°æ®åº“**: SQLite (å¸¦è¿ç§»æ”¯æŒ)
- **æ¶æ„**: å¹³å°æ— å…³çš„åº”ç”¨æ•°æ®è·¯å¾„å¤„ç† (Windows/macOS/Linux)

### å‰ç«¯
- **æ¡†æ¶**: React 19 + TypeScript
- **è·¯ç”±**: TanStack Router (æ–‡ä»¶è·¯ç”±)
- **UIç»„ä»¶**: Radix UI + Shadcn UI
- **æ ·å¼**: Tailwind CSS v4
- **è§†é¢‘æ’­æ”¾**: HLS.js + Video.js
- **æ„å»ºå·¥å…·**: Vite

## å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚

- Go 1.21+
- Node.js 18+
- Wails CLI (`go install github.com/wailsapp/wails/v2/cmd/wails@latest`)

### å®‰è£…ä¾èµ–

```bash
# å®‰è£… Go ä¾èµ–
go mod download

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
npm install
cd ..
```

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (å¸¦çƒ­é‡è½½)
wails dev

# æˆ–ä½¿ç”¨ Make
make dev
```

å¼€å‘æœåŠ¡å™¨ä¼šåœ¨ `http://localhost:34115` å¯åŠ¨ï¼Œæ”¯æŒå‰ç«¯çƒ­é‡è½½å’Œ Go æ–¹æ³•è°ƒè¯•ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºåº”ç”¨
wails build

# æ„å»ºåçš„æ–‡ä»¶åœ¨ build/bin/ ç›®å½•
```

## å¼€å‘å‘½ä»¤

### ä¸»è¦å‘½ä»¤

- `wails dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `wails build` - æ„å»ºç”Ÿäº§åº”ç”¨
- `make dev` - `wails dev` çš„å¿«æ·æ–¹å¼
- `make mod` - è¿è¡Œ `go mod tidy` æ¸…ç†ä¾èµ–

### å‰ç«¯å‘½ä»¤ (åœ¨ frontend/ ç›®å½•)

```bash
npm install       # å®‰è£…ä¾èµ–
npm run dev       # å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨
npm run build     # æ„å»ºå‰ç«¯ (TypeScript ç¼–è¯‘ + Vite æ„å»º)
npm run preview   # é¢„è§ˆæ„å»ºç»“æœ
```

### Git æ“ä½œ

```bash
make origin      # æ¨é€åˆ° origin è¿œç¨‹ä»“åº“ (å¸¦æ ‡ç­¾)
make tea         # æ¨é€åˆ° tea è¿œç¨‹ä»“åº“ (å¸¦æ ‡ç­¾)
```

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ main.go              # Wails åº”ç”¨å…¥å£
â”œâ”€â”€ app.go               # ä¸»åº”ç”¨é€»è¾‘å’Œæ•°æ®åº“é›†æˆ
â”œâ”€â”€ wails.json           # Wails é…ç½®
â”œâ”€â”€ Makefile             # å¼€å‘å¿«æ·å‘½ä»¤
â”œâ”€â”€ services/            # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ auth.go          # è®¤è¯é€»è¾‘
â”‚   â”œâ”€â”€ database.go      # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ migration.go     # è¿ç§»å·¥å…·
â”‚   â””â”€â”€ proxy.go         # ä»£ç†æœåŠ¡
â”œâ”€â”€ migrations/          # SQL è¿ç§»æ–‡ä»¶
â”œâ”€â”€ handlers/            # HTTP/API å¤„ç†å™¨
â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â””â”€â”€ frontend/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/  # React ç»„ä»¶
    â”‚   â”‚   â”œâ”€â”€ ui/      # Shadcn UI ç»„ä»¶
    â”‚   â”‚   â”œâ”€â”€ douban/  # è±†ç“£é›†æˆç»„ä»¶
    â”‚   â”‚   â””â”€â”€ mc-*/    # MooncakeTV è‡ªå®šä¹‰ç»„ä»¶
    â”‚   â”œâ”€â”€ routes/      # è·¯ç”±æ–‡ä»¶
    â”‚   â”œâ”€â”€ hooks/       # è‡ªå®šä¹‰ Hooks
    â”‚   â”œâ”€â”€ lib/         # å·¥å…·åº“
    â”‚   â”œâ”€â”€ screens/     # é¡µé¢ç»„ä»¶
    â”‚   â”œâ”€â”€ stores/      # çŠ¶æ€ç®¡ç†
    â”‚   â””â”€â”€ contexts/    # React ä¸Šä¸‹æ–‡
    â””â”€â”€ package.json     # å‰ç«¯ä¾èµ–
```

## æ•°æ®åº“æ¶æ„

åº”ç”¨ä½¿ç”¨ SQLiteï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ•°æ®è¡¨ï¼š

- `users` - ç”¨æˆ·ç®¡ç†
- `settings` - ç”¨æˆ·åå¥½è®¾ç½®
- `medias` - åª’ä½“å†…å®¹åŠå¤šæºè¯„åˆ†æ•°æ®
- `bookmarks` - ç”¨æˆ·ä¹¦ç­¾
- `history` - è§‚çœ‹å†å²
- `mc_comments` - ç”¨æˆ·åª’ä½“è¯„è®º

## é…ç½®

é¡¹ç›®é…ç½®å¯é€šè¿‡ç¼–è¾‘ `wails.json` æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è€ƒï¼šhttps://wails.io/docs/reference/project-config

## å¹³å°æ”¯æŒ

- âœ… macOS
- âœ… Windows
- âœ… Linux

åº”ç”¨ä¼šè‡ªåŠ¨è¯†åˆ«å¹³å°å¹¶ä½¿ç”¨ç›¸åº”çš„æ•°æ®ç›®å½•ï¼š
- **Windows**: `%APPDATA%\MooncakeTV`
- **macOS**: `~/Library/Application Support/MooncakeTV`
- **Linux**: `~/.local/share/MooncakeTV`

## è®¸å¯è¯

è¯·æŸ¥çœ‹ LICENSE æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
